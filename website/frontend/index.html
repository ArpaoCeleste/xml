<!DOCTYPE html>
<html lang="pt-PT">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Reservas Hotel - DWDM</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Fira+Code:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <canvas id="sparklesCanvas"></canvas>

    <div class="background-effects">

        <svg class="snow-svg" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="snow-grad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" stop-color="#a855f7" stop-opacity="0.8" />
                    <stop offset="100%" stop-color="#a855f7" stop-opacity="0.05" />
                </linearGradient>
            </defs>
            <g fill="url(#snow-grad)">
                <circle r="2" class="snowflake s1" cy="-20" />
                <circle r="3" class="snowflake s2" cy="-20" />
                <circle r="1.5" class="snowflake s3" cy="-20" />
                <circle r="2.5" class="snowflake s4" cy="-20" />
                <circle r="3" class="snowflake s5" cy="-20" />
                <circle r="2" class="snowflake s6" cy="-20" />
                <circle r="2.5" class="snowflake s7" cy="-20" />
                <circle r="1.5" class="snowflake s8" cy="-20" />
                <circle r="2" class="snowflake s9" cy="-20" />
                <circle r="3" class="snowflake s10" cy="-20" />
                <circle r="1" class="snowflake s11" cy="-20" />
                <circle r="2.5" class="snowflake s12" cy="-20" />
                <circle r="2" class="snowflake s13" cy="-20" />
                <circle r="1.5" class="snowflake s14" cy="-20" />
                <circle r="3" class="snowflake s15" cy="-20" />
                <circle r="2" class="snowflake s16" cy="-20" />
                <circle r="2.5" class="snowflake s17" cy="-20" />
                <circle r="1.5" class="snowflake s18" cy="-20" />
                <circle r="2" class="snowflake s19" cy="-20" />
                <circle r="3" class="snowflake s20" cy="-20" />
                <circle r="2" class="snowflake s21" cy="-20" />
                <circle r="1" class="snowflake s22" cy="-20" />
                <circle r="3" class="snowflake s23" cy="-20" />
                <circle r="2.5" class="snowflake s24" cy="-20" />
                <circle r="1.5" class="snowflake s25" cy="-20" />
                <circle r="2" class="snowflake s26" cy="-20" />
                <circle r="3" class="snowflake s27" cy="-20" />
                <circle r="1.5" class="snowflake s28" cy="-20" />
                <circle r="2.5" class="snowflake s29" cy="-20" />
                <circle r="2" class="snowflake s30" cy="-20" />
                <circle r="1" class="snowflake s31" cy="-20" />
                <circle r="2.5" class="snowflake s32" cy="-20" />
                <circle r="3" class="snowflake s33" cy="-20" />
                <circle r="2" class="snowflake s34" cy="-20" />
                <circle r="1.5" class="snowflake s35" cy="-20" />
                <circle r="2" class="snowflake s36" cy="-20" />
                <circle r="2.5" class="snowflake s37" cy="-20" />
                <circle r="3" class="snowflake s38" cy="-20" />
                <circle r="1" class="snowflake s39" cy="-20" />
                <circle r="2" class="snowflake s40" cy="-20" />
            </g>
        </svg>
    </div>


    <header>
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon"><i class="fas fa-hotel"></i></div>
                <div class="logo-text">
                    <h1>Hotel Reservas</h1>
                    <span class="logo-badge">REST API</span>
                </div>
            </div>
            <p class="subtitle"><span class="tech-badge">XML</span> <span class="tech-badge">MongoDB</span> <span
                    class="tech-badge">Node.js</span></p>
        </div>
    </header>

    <nav class="main-nav">
        <button class="nav-btn active" data-section="dashboard"><i class="fas fa-chart-pie"></i> Dashboard</button>

        <button class="nav-btn" data-section="mongodb"><i class="fas fa-leaf"></i> MongoDB</button>
        <button class="nav-btn" data-section="xquery"><i class="fas fa-code"></i> XQuery</button>
        <button class="nav-btn" data-section="unidades"><i class="fas fa-map-marker-alt"></i> Unidades</button>
        <button class="nav-btn" data-section="xsd"><i class="fas fa-file-code"></i> Schema</button>
        <button class="nav-btn" data-section="sobre"><i class="fas fa-info-circle"></i> Sobre</button>
        <a href="swagger.html" target="_blank" class="nav-btn swagger-link"><i class="fas fa-book"></i> Swagger</a>
    </nav>

    <main>
        <section class="main-section active" id="section-dashboard">
            <div class="stats-grid">
                <div class="stat-card stat-reservas">
                    <div class="stat-icon-wrapper"><i class="fas fa-calendar-check"></i></div>
                    <div class="stat-content">
                        <div class="stat-value" id="total-reservas">-</div>
                        <div class="stat-label">Total Reservas</div>
                    </div>
                </div>
                <div class="stat-card stat-valor">
                    <div class="stat-icon-wrapper"><i class="fas fa-euro-sign"></i></div>
                    <div class="stat-content">
                        <div class="stat-value" id="valor-total">-</div>
                        <div class="stat-label">Valor Total</div>
                    </div>
                </div>
                <div class="stat-card stat-media">
                    <div class="stat-icon-wrapper"><i class="fas fa-chart-line"></i></div>
                    <div class="stat-content">
                        <div class="stat-value" id="valor-medio">-</div>
                        <div class="stat-label">Valor Médio</div>
                    </div>
                </div>
                <div class="stat-card stat-servicos">
                    <div class="stat-icon-wrapper"><i class="fas fa-concierge-bell"></i></div>
                    <div class="stat-content">
                        <div class="stat-value" id="total-servicos">-</div>
                        <div class="stat-label">Serviços Vendidos</div>
                    </div>
                </div>
            </div>

            <div class="charts-row">
                <div class="chart-card glass-card">
                    <h3><i class="fas fa-building"></i> Reservas por Unidade</h3>
                    <div class="chart-container" id="chart-unidades"></div>
                </div>
                <div class="chart-card glass-card">
                    <h3><i class="fas fa-spa"></i> Serviços por Tipo</h3>
                    <div class="chart-container" id="chart-servicos"></div>
                </div>
            </div>

            <div class="queries-section glass-card">
                <div class="section-header">
                    <h2><i class="fas fa-search section-icon"></i> Consultas API REST</h2>
                    <div class="api-status">
                        <span class="status-dot" id="api-status-dot"></span>
                        <span id="api-status-text">A verificar...</span>
                    </div>
                </div>

                <div class="query-tabs">
                    <button class="tab-btn active" data-tab="todas"><i class="fas fa-list"></i> Todas</button>
                    <button class="tab-btn" data-tab="hospede"><i class="fas fa-user"></i> Hóspede</button>
                    <button class="tab-btn" data-tab="unidade"><i class="fas fa-building"></i> Unidade</button>
                    <button class="tab-btn" data-tab="servicos"><i class="fas fa-concierge-bell"></i> Serviços</button>
                    <button class="tab-btn" data-tab="reserva"><i class="fas fa-search"></i> Reserva</button>

                    <button class="tab-btn" data-tab="criar"><i class="fas fa-plus-circle"></i> Criar</button>
                    <button class="tab-btn" data-tab="atualizar"><i class="fas fa-edit"></i> Atualizar</button>
                    <button class="tab-btn" data-tab="apagar"><i class="fas fa-trash-alt"></i> Apagar</button>
                </div>

                <div class="query-content">
                    <div class="tab-panel active" id="panel-todas">
                        <div class="query-header">
                            <div class="query-info">
                                <div class="endpoint-badge">GET</div>
                                <code class="endpoint-url">/api/reservas</code>
                            </div>
                            <p class="query-description">Todas as reservas do sistema</p>
                        </div>
                        <div class="query-controls">
                            <button class="btn-execute" onclick="executarQuery('todas')"><i class="fas fa-play"></i>
                                Executar</button>
                        </div>
                        <div class="query-result" id="result-todas">
                            <div class="placeholder"><i class="fas fa-lightbulb placeholder-icon"></i>
                                <p>Clica em Executar</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-hospede">
                        <div class="query-header">
                            <div class="query-info">
                                <div class="endpoint-badge">GET</div>
                                <code class="endpoint-url">/api/reservas/hospede/:id</code>
                            </div>
                            <p class="query-description">Reservas de um hóspede específico</p>
                        </div>
                        <div class="query-controls">
                            <div class="input-group">
                                <label>Hóspede:</label>
                                <select id="select-hospede" class="custom-select">
                                    <option value="">A carregar...</option>
                                </select>
                            </div>
                            <button class="btn-execute" onclick="executarQuery('hospede')"><i class="fas fa-play"></i>
                                Executar</button>
                        </div>
                        <div class="query-result" id="result-hospede">
                            <div class="placeholder"><i class="fas fa-user placeholder-icon"></i>
                                <p>Selecciona um hóspede</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-unidade">
                        <div class="query-header">
                            <div class="query-info">
                                <div class="endpoint-badge">GET</div>
                                <code class="endpoint-url">/api/reservas/unidade</code>
                            </div>
                            <p class="query-description">Quantidade de reservas por unidade hoteleira</p>
                        </div>
                        <div class="query-controls">
                            <button class="btn-execute" onclick="executarQuery('unidade')"><i class="fas fa-play"></i>
                                Executar</button>
                        </div>
                        <div class="query-result" id="result-unidade">
                            <div class="placeholder"><i class="fas fa-building placeholder-icon"></i>
                                <p>Clica em Executar</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-servicos">
                        <div class="query-header">
                            <div class="query-info">
                                <div class="endpoint-badge">GET</div>
                                <code class="endpoint-url">/api/servicos/total</code>
                            </div>
                            <p class="query-description">Total de serviços adicionais vendidos por tipo</p>
                        </div>
                        <div class="query-controls">
                            <div class="input-group">
                                <label>Filtrar:</label>
                                <select id="select-servico" class="custom-select">
                                    <option value="todos">Todos os tipos</option>
                                    <option value="spa">Spa</option>
                                    <option value="restaurante">Restaurante</option>
                                    <option value="transporte">Transporte</option>
                                    <option value="outros">Outros</option>
                                </select>
                            </div>
                            <button class="btn-execute" onclick="executarQuery('servicos')"><i class="fas fa-play"></i>
                                Executar</button>
                        </div>
                        <div class="query-result" id="result-servicos">
                            <div class="placeholder"><i class="fas fa-concierge-bell placeholder-icon"></i>
                                <p>Clica em Executar</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-reserva">
                        <div class="query-header">
                            <div class="query-info">
                                <div class="endpoint-badge">GET</div>
                                <code class="endpoint-url">/api/reservas/:numero</code>
                            </div>
                            <p class="query-description">Todos os dados de uma reserva específica</p>
                        </div>
                        <div class="query-controls">
                            <div class="input-group">
                                <label>Reserva:</label>
                                <select id="select-reserva" class="custom-select">
                                    <option value="">A carregar...</option>
                                </select>
                            </div>
                            <button class="btn-execute" onclick="executarQuery('reserva')"><i class="fas fa-play"></i>
                                Executar</button>
                        </div>
                        <div class="query-result" id="result-reserva">
                            <div class="placeholder"><i class="fas fa-search placeholder-icon"></i>
                                <p>Selecciona uma reserva</p>
                            </div>
                        </div>
                    </div>


                    <div class="tab-panel" id="panel-criar">
                        <div class="query-header">
                            <div class="query-info">
                                <div class="endpoint-badge" style="background: var(--accent-primary);">POST</div>
                                <code class="endpoint-url">/api/reservas</code>
                            </div>
                            <p class="query-description">Criar uma nova reserva</p>
                        </div>
                        <div class="query-controls" style="display: block;">
                            <form id="form-criar-reserva" class="glass-form"
                                onsubmit="event.preventDefault(); return false;">
                                <div class="form-section-header">Reserva</div>
                                <div class="form-row">
                                    <div class="input-group">
                                        <label>ID Reserva <span class="required">*</span></label>
                                        <input type="text" id="novo-id-reserva" placeholder="RES000"
                                            pattern="RES[0-9]{3}" required>
                                        <small class="hint">Formato: RESxxx</small>
                                    </div>
                                    <div class="input-group">
                                        <label>Unidade <span class="required">*</span></label>
                                        <select id="novo-unidade" class="custom-select" required>
                                            <option value="LS">Lisboa (LS)</option>
                                            <option value="PO">Porto (PO)</option>
                                            <option value="CB">Coimbra (CB)</option>
                                            <option value="FR">Faro (FR)</option>
                                            <option value="BR">Braga (BR)</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-section-header">Hóspede</div>
                                <div class="form-row">
                                    <div class="input-group">
                                        <label>Nome Hóspede <span class="required">*</span></label>
                                        <input type="text" id="novo-nome" placeholder="Nome completo" required>
                                    </div>
                                    <div class="input-group">
                                        <label>ID Cliente <span class="required">*</span></label>
                                        <input type="text" id="novo-id-cliente" placeholder="CLI000"
                                            pattern="CLI[0-9]{3}" required>
                                        <small class="hint">Formato: CLIxxx</small>
                                    </div>
                                </div>

                                <div class="form-section-header">Alojamento</div>
                                <div class="form-row">
                                    <div class="input-group">
                                        <label>Quarto</label>
                                        <input type="text" id="novo-quarto" placeholder="Ex: 101" required>
                                    </div>
                                    <div class="input-group">
                                        <label>Valor Total (€)</label>
                                        <input type="number" id="novo-valor" placeholder="0.00" min="0" step="0.01"
                                            required>
                                    </div>
                                </div>

                                <div class="form-section-header">Estadia</div>
                                <div class="form-row">
                                    <div class="input-group">
                                        <label>Check-in</label>
                                        <input type="date" id="novo-checkin" required>
                                    </div>
                                    <div class="input-group">
                                        <label>Check-out</label>
                                        <input type="date" id="novo-checkout" required>
                                    </div>
                                </div>

                                <div class="form-section-header">Serviços Extra</div>
                                <div class="form-row">
                                    <div class="input-group" style="width: 100%;">
                                        <label
                                            style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            Serviços Adicionais
                                            <span style="font-size: 0.7rem; color: var(--accent-orange);">Máx: 4
                                                selecionados</span>
                                        </label>

                                        <div class="services-selection-grid">

                                            <div class="service-option-card" data-type="spa">
                                                <div class="svc-content">
                                                    <div class="svc-icon-large"><i class="fas fa-spa"></i></div>
                                                    <h4 class="svc-title">Spa</h4>
                                                    <p class="svc-desc">Massagens, tratamentos de beleza e relaxamento
                                                    </p>
                                                </div>
                                                <div class="svc-inputs-overlay">
                                                    <div class="svc-input-group">
                                                        <label>Quantidade</label>
                                                        <input type="number" class="svc-qtd" value="1" min="1">
                                                    </div>
                                                    <div class="svc-input-group">
                                                        <label>Preço (€)</label>
                                                        <input type="number" class="svc-price" value="0.00"
                                                            placeholder="0.00" step="0.01">
                                                    </div>
                                                </div>
                                                <div class="svc-check-badge"><i class="fas fa-check"></i></div>
                                            </div>


                                            <div class="service-option-card" data-type="restaurante">
                                                <div class="svc-content">
                                                    <div class="svc-icon-large"><i class="fas fa-utensils"></i></div>
                                                    <h4 class="svc-title">Restaurante</h4>
                                                    <p class="svc-desc">Gastronomia portuguesa e internacional</p>
                                                </div>
                                                <div class="svc-inputs-overlay">
                                                    <div class="svc-input-group">
                                                        <label>Pessoas</label>
                                                        <input type="number" class="svc-qtd" value="1" min="1">
                                                    </div>
                                                    <div class="svc-input-group">
                                                        <label>Preço (€)</label>
                                                        <input type="number" class="svc-price" value="0.00"
                                                            placeholder="0.00" step="0.01">
                                                    </div>
                                                </div>
                                                <div class="svc-check-badge"><i class="fas fa-check"></i></div>
                                            </div>


                                            <div class="service-option-card" data-type="transporte">
                                                <div class="svc-content">
                                                    <div class="svc-icon-large"><i class="fas fa-shuttle-van"></i></div>
                                                    <h4 class="svc-title">Transporte</h4>
                                                    <p class="svc-desc">Transfers e transporte privado</p>
                                                </div>
                                                <div class="svc-inputs-overlay">
                                                    <div class="svc-input-group">
                                                        <label>Passageiros</label>
                                                        <input type="number" class="svc-qtd" value="1" min="1">
                                                    </div>
                                                    <div class="svc-input-group">
                                                        <label>Preço (€)</label>
                                                        <input type="number" class="svc-price" value="0.00"
                                                            placeholder="0.00" step="0.01">
                                                    </div>
                                                </div>
                                                <div class="svc-check-badge"><i class="fas fa-check"></i></div>
                                            </div>


                                            <div class="service-option-card" data-type="outros">
                                                <div class="svc-content">
                                                    <div class="svc-icon-large"><i class="fas fa-ellipsis-h"></i></div>
                                                    <h4 class="svc-title">Outros</h4>
                                                    <p class="svc-desc">Bar, lavandaria, room service, etc.</p>
                                                </div>
                                                <div class="svc-inputs-overlay">
                                                    <div class="svc-input-group">
                                                        <label>Quantidade</label>
                                                        <input type="number" class="svc-qtd" value="1" min="1">
                                                    </div>
                                                    <div class="svc-input-group">
                                                        <label>Preço (€)</label>
                                                        <input type="number" class="svc-price" value="0.00"
                                                            placeholder="0.00" step="0.01">
                                                    </div>
                                                </div>
                                                <div class="svc-check-badge"><i class="fas fa-check"></i></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <button type="submit" class="btn-execute full-width"><i class="fas fa-plus-circle"></i>
                                    Criar Reserva</button>
                            </form>
                        </div>
                        <div class="query-result" id="result-criar">
                            <div class="placeholder"><i class="fas fa-info-circle placeholder-icon"></i>
                                <p>Preencha o formulário acima</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-atualizar">
                        <div class="query-header">
                            <div class="query-info">
                                <div class="endpoint-badge" style="background: #a855f7;">PUT</div>
                                <code class="endpoint-url">/api/reservas/:numero</code>
                            </div>
                            <p class="query-description">Atualizar uma reserva existente</p>
                        </div>
                        <div class="query-controls" style="display: block;">
                            <div class="input-group" style="margin-bottom: 1.5rem;">
                                <label>Seleciona a Reserva:</label>
                                <select id="select-reserva-put" class="custom-select">
                                    <option value="">A carregar...</option>
                                </select>
                            </div>

                            <form id="form-atualizar-reserva" class="glass-form" style="display: none;"
                                onsubmit="event.preventDefault(); return false;">
                                <div class="form-section-header-edit">Reserva</div>
                                <div class="form-row">
                                    <div class="input-group">
                                        <label>ID Reserva</label>
                                        <input type="text" id="edit-id-reserva" readonly>
                                        <small class="hint">Formato: RESxxx</small>
                                    </div>
                                    <div class="input-group">
                                        <label>Unidade <span class="required">*</span></label>
                                        <select id="edit-unidade" class="custom-select" required>
                                            <option value="LS">Lisboa (LS)</option>
                                            <option value="PO">Porto (PO)</option>
                                            <option value="CB">Coimbra (CB)</option>
                                            <option value="FR">Faro (FR)</option>
                                            <option value="BR">Braga (BR)</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-section-header-edit">Hóspede</div>
                                <div class="form-row">
                                    <div class="input-group">
                                        <label>Nome Hóspede <span class="required">*</span></label>
                                        <input type="text" id="edit-nome" required>
                                    </div>
                                    <div class="input-group">
                                        <label>ID Cliente <span class="required">*</span></label>
                                        <input type="text" id="edit-id-cliente" pattern="CLI[0-9]{3}" required>
                                        <small class="hint">Formato: CLIxxx</small>
                                    </div>
                                </div>

                                <div class="form-section-header-edit">Alojamento</div>
                                <div class="form-row">
                                    <div class="input-group">
                                        <label>Quarto</label>
                                        <input type="text" id="edit-quarto" required>
                                    </div>
                                    <div class="input-group">
                                        <label>Valor Total (€)</label>
                                        <input type="number" id="edit-valor" min="0" step="0.01" required>
                                    </div>
                                </div>

                                <div class="form-section-header-edit">Estadia</div>
                                <div class="form-row">
                                    <div class="input-group">
                                        <label>Check-in</label>
                                        <input type="date" id="edit-checkin" required>
                                    </div>
                                    <div class="input-group">
                                        <label>Check-out</label>
                                        <input type="date" id="edit-checkout" required>
                                    </div>
                                </div>


                                <div class="form-section-header-edit">Serviços Extra</div>
                                <div class="form-row">
                                    <div class="input-group" style="width: 100%;">
                                        <label
                                            style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                            Serviços Adicionais
                                            <span style="font-size: 0.7rem; color: var(--accent-orange);">Máx: 4
                                                selecionados</span>
                                        </label>

                                        <div style="display: flex; flex-direction: column; gap: 15px;">
                                            <div class="service-item-container"
                                                style="display: flex; align-items: center; gap: 15px; padding: 15px; border-radius: 12px;">
                                                <input type="checkbox" id="edit-check-spa"
                                                    style="width: 20px; height: 20px; cursor: pointer;">
                                                <label for="edit-check-spa"
                                                    style="flex: 1; margin: 0; cursor: pointer;"><i
                                                        class="fas fa-spa"></i> Spa</label>
                                                <input type="number" id="edit-qtd-spa" placeholder="Qtd" min="1"
                                                    style="width: 80px; padding: 8px; background: rgba(10,8,15,0.6); border: 1px solid var(--border); border-radius: 8px; color: white;">
                                                <input type="number" id="edit-price-spa" placeholder="Preço (€)"
                                                    step="0.01"
                                                    style="width: 100px; padding: 8px; background: rgba(10,8,15,0.6); border: 1px solid var(--border); border-radius: 8px; color: white;">
                                            </div>

                                            <div class="service-item-container"
                                                style="display: flex; align-items: center; gap: 15px; padding: 15px; border-radius: 12px;">
                                                <input type="checkbox" id="edit-check-restaurante"
                                                    style="width: 20px; height: 20px; cursor: pointer;">
                                                <label for="edit-check-restaurante"
                                                    style="flex: 1; margin: 0; cursor: pointer;"><i
                                                        class="fas fa-utensils"></i> Restaurante</label>
                                                <input type="number" id="edit-qtd-restaurante" placeholder="Pessoas"
                                                    min="1"
                                                    style="width: 80px; padding: 8px; background: rgba(10,8,15,0.6); border: 1px solid var(--border); border-radius: 8px; color: white;">
                                                <input type="number" id="edit-price-restaurante" placeholder="Preço (€)"
                                                    step="0.01"
                                                    style="width: 100px; padding: 8px; background: rgba(10,8,15,0.6); border: 1px solid var(--border); border-radius: 8px; color: white;">
                                            </div>

                                            <div class="service-item-container"
                                                style="display: flex; align-items: center; gap: 15px; padding: 15px; border-radius: 12px;">
                                                <input type="checkbox" id="edit-check-transporte"
                                                    style="width: 20px; height: 20px; cursor: pointer;">
                                                <label for="edit-check-transporte"
                                                    style="flex: 1; margin: 0; cursor: pointer;"><i
                                                        class="fas fa-shuttle-van"></i> Transporte</label>
                                                <input type="number" id="edit-qtd-transporte" placeholder="Passageiros"
                                                    min="1"
                                                    style="width: 80px; padding: 8px; background: rgba(10,8,15,0.6); border: 1px solid var(--border); border-radius: 8px; color: white;">
                                                <input type="number" id="edit-price-transporte" placeholder="Preço (€)"
                                                    step="0.01"
                                                    style="width: 100px; padding: 8px; background: rgba(10,8,15,0.6); border: 1px solid var(--border); border-radius: 8px; color: white;">
                                            </div>

                                            <div class="service-item-container"
                                                style="display: flex; align-items: center; gap: 15px; padding: 15px; border-radius: 12px;">
                                                <input type="checkbox" id="edit-check-outros"
                                                    style="width: 20px; height: 20px; cursor: pointer;">
                                                <label for="edit-check-outros"
                                                    style="flex: 1; margin: 0; cursor: pointer;"><i
                                                        class="fas fa-ellipsis-h"></i> Outros</label>
                                                <input type="number" id="edit-qtd-outros" placeholder="Qtd" min="1"
                                                    style="width: 80px; padding: 8px; background: rgba(10,8,15,0.6); border: 1px solid var(--border); border-radius: 8px; color: white;">
                                                <input type="number" id="edit-price-outros" placeholder="Preço (€)"
                                                    step="0.01"
                                                    style="width: 100px; padding: 8px; background: rgba(10,8,15,0.6); border: 1px solid var(--border); border-radius: 8px; color: white;">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <button type="submit" class="btn-execute full-width"><i class="fas fa-save"></i>
                                    Atualizar Reserva</button>
                                </button>
                            </form>
                        </div>
                        <div class="query-result" id="result-atualizar">
                            <div class="placeholder"><i class="fas fa-edit placeholder-icon"></i>
                                <p>Seleciona uma reserva para atualizar</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-apagar">
                        <div class="query-header">
                            <div class="query-info">
                                <div class="endpoint-badge" style="background: var(--accent-primary);">DELETE</div>
                                <code class="endpoint-url">/api/reservas/:numero</code>
                            </div>
                            <p class="query-description">Remover uma reserva do sistema</p>
                        </div>
                        <div class="query-controls">
                            <div class="input-group">
                                <label>Reserva:</label>
                                <select id="select-reserva-del" class="custom-select">
                                    <option value="">A carregar...</option>
                                </select>
                            </div>
                            <button class="btn-execute" onclick="executarQuery('apagar')"><i class="fas fa-play"></i>
                                Executar</button>
                        </div>
                        <div class="query-result" id="result-apagar">
                            <div class="placeholder"><i class="fas fa-trash-alt placeholder-icon"></i>
                                <p>Cuidado: Ação irreversível</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="main-section" id="section-unidades">
            <div class="section-intro glass-card">
                <h2><i class="fas fa-map-marker-alt"></i> Unidades Hoteleiras</h2>
                <p>O hotel possui 5 unidades distribuídas pelas principais cidades de Portugal</p>
            </div>

            <div class="unidades-grid">
                <div class="unidade-card">
                    <div class="unidade-sigla">LS</div>
                    <div class="unidade-info">
                        <h3>Lisboa</h3>
                        <p>Capital de Portugal</p>
                        <div class="unidade-stats">
                            <span><i class="fas fa-calendar"></i> <span id="stats-LS">-</span> reservas</span>
                        </div>
                    </div>
                </div>
                <div class="unidade-card">
                    <div class="unidade-sigla">PO</div>
                    <div class="unidade-info">
                        <h3>Porto</h3>
                        <p>Cidade Invicta</p>
                        <div class="unidade-stats">
                            <span><i class="fas fa-calendar"></i> <span id="stats-PO">-</span> reservas</span>
                        </div>
                    </div>
                </div>
                <div class="unidade-card">
                    <div class="unidade-sigla">CB</div>
                    <div class="unidade-info">
                        <h3>Coimbra</h3>
                        <p>Cidade Universitária</p>
                        <div class="unidade-stats">
                            <span><i class="fas fa-calendar"></i> <span id="stats-CB">-</span> reservas</span>
                        </div>
                    </div>
                </div>
                <div class="unidade-card">
                    <div class="unidade-sigla">FR</div>
                    <div class="unidade-info">
                        <h3>Faro</h3>
                        <p>Capital do Algarve</p>
                        <div class="unidade-stats">
                            <span><i class="fas fa-calendar"></i> <span id="stats-FR">-</span> reservas</span>
                        </div>
                    </div>
                </div>
                <div class="unidade-card">
                    <div class="unidade-sigla">BR</div>
                    <div class="unidade-info">
                        <h3>Braga</h3>
                        <p>Cidade dos Arcebispos</p>
                        <div class="unidade-stats">
                            <span><i class="fas fa-calendar"></i> <span id="stats-BR">-</span> reservas</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="servicos-section glass-card">
                <h2><i class="fas fa-concierge-bell"></i> Serviços Adicionais Disponíveis</h2>
                <div class="servicos-grid">
                    <div class="servico-item">
                        <i class="fas fa-spa"></i>
                        <h4>Spa</h4>
                        <p>Massagens, tratamentos de beleza e relaxamento</p>
                    </div>
                    <div class="servico-item">
                        <i class="fas fa-utensils"></i>
                        <h4>Restaurante</h4>
                        <p>Gastronomia portuguesa e internacional</p>
                    </div>
                    <div class="servico-item">
                        <i class="fas fa-shuttle-van"></i>
                        <h4>Transporte</h4>
                        <p>Transfers e transporte privado</p>
                    </div>
                    <div class="servico-item">
                        <i class="fas fa-ellipsis-h"></i>
                        <h4>Outros</h4>
                        <p>Lavandaria, room service, etc.</p>
                    </div>
                </div>
                <div class="servicos-nota">
                    <i class="fas fa-info-circle"></i>
                    <span>Máximo de 4 serviços adicionais por reserva</span>
                </div>
            </div>
        </section>

        <section class="main-section" id="section-mongodb">
            <div class="queries-section glass-card">
                <div class="section-header">
                    <h2><i class="fas fa-leaf section-icon"></i> MongoDB Aggregation Queries</h2>
                </div>

                <div class="query-tabs">
                    <button class="tab-btn active" data-tab="mongo1"><i class="fas fa-spa"></i> Serviços</button>
                    <button class="tab-btn" data-tab="mongo2"><i class="fas fa-building"></i> Unidade</button>
                    <button class="tab-btn" data-tab="mongo3"><i class="fas fa-calculator"></i> Média</button>

                    <button class="tab-btn" data-tab="mongo5"><i class="fas fa-search"></i> Específica</button>
                </div>

                <div class="query-content">
                    <div class="tab-panel active" id="panel-mongo1">
                        <div class="query-header">
                            <h3>1. Número total de serviços vendidos por tipo</h3>
                            <p class="query-description">Agrupa os serviços adicionais por tipo (spa, restaurante,
                                transporte)</p>
                        </div>
                        <div class="query-controls">
                            <button class="btn-secondary" onclick="toggleCode('mongo1')"><i class="fas fa-code"></i> Ver
                                Query</button>
                            <button class="btn-execute" onclick="executarQueryMongo('mongo1')"><i
                                    class="fas fa-play"></i> Executar</button>
                        </div>
                        <div class="code-container hidden" id="code-mongo1">
                            <pre class="code-display"><code>db.reservas.aggregate([
  { $unwind: "$servicosAdicionais" },
  {
    $group: {
      _id: "$servicosAdicionais.tipo",
      totalServicos: { $sum: 1 },
      quantidadeTotal: { $sum: "$servicosAdicionais.quantidade" },
      valorTotal: { $sum: { $multiply: ["$servicosAdicionais.preco", "$servicosAdicionais.quantidade"] } }
    }
  },
  { $sort: { quantidadeTotal: -1 } },
  { $project: { _id: 0, tipo: "$_id", totalServicos: 1, quantidadeTotal: 1, valorTotal: { $round: ["$valorTotal", 2] } } }
])</code></pre>
                        </div>
                        <div class="query-result" id="result-mongo1">
                            <div class="placeholder"><i class="fas fa-leaf placeholder-icon"></i>
                                <p>Clica em Executar</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-mongo2">
                        <div class="query-header">
                            <h3>2. Quantidade de reservas por unidade</h3>
                            <p class="query-description">Agrupa reservas por unidade hoteleira (LS, PO, CB, FR, BR)</p>
                        </div>
                        <div class="query-controls">
                            <button class="btn-secondary" onclick="toggleCode('mongo2')"><i class="fas fa-code"></i> Ver
                                Query</button>
                            <button class="btn-execute" onclick="executarQueryMongo('mongo2')"><i
                                    class="fas fa-play"></i> Executar</button>
                        </div>
                        <div class="code-container hidden" id="code-mongo2">
                            <pre class="code-display"><code>db.reservas.aggregate([
  { $group: { _id: "$unidade", quantidadeReservas: { $count: {} }, valorTotalReservas: { $sum: "$valorTotal" } } },
  { $sort: { quantidadeReservas: -1 } },
  { $project: { _id: 0, unidade: "$_id", nomeUnidade: { $switch: { branches: [
    { case: { $eq: ["$_id", "LS"] }, then: "Lisboa" },
    { case: { $eq: ["$_id", "PO"] }, then: "Porto" },
    { case: { $eq: ["$_id", "CB"] }, then: "Coimbra" },
    { case: { $eq: ["$_id", "FR"] }, then: "Faro" },
    { case: { $eq: ["$_id", "BR"] }, then: "Braga" }
  ], default: "Desconhecida" } }, quantidadeReservas: 1, valorTotalReservas: 1 } }
])</code></pre>
                        </div>
                        <div class="query-result" id="result-mongo2">
                            <div class="placeholder"><i class="fas fa-building placeholder-icon"></i>
                                <p>Clica em Executar</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-mongo3">
                        <div class="query-header">
                            <h3>3. Valor médio das reservas</h3>
                            <p class="query-description">Calcula estatísticas gerais das reservas</p>
                        </div>
                        <div class="query-controls">
                            <button class="btn-secondary" onclick="toggleCode('mongo3')"><i class="fas fa-code"></i> Ver
                                Query</button>
                            <button class="btn-execute" onclick="executarQueryMongo('mongo3')"><i
                                    class="fas fa-play"></i> Executar</button>
                        </div>
                        <div class="code-container hidden" id="code-mongo3">
                            <pre class="code-display"><code>db.reservas.aggregate([
  { $group: { _id: null, valorMedio: { $avg: "$valorTotal" }, totalReservas: { $sum: 1 }, valorTotalGeral: { $sum: "$valorTotal" } } },
  { $project: { _id: 0, valorMedio: { $round: ["$valorMedio", 2] }, totalReservas: 1, valorTotalGeral: { $round: ["$valorTotalGeral", 2] } } }
])</code></pre>
                        </div>
                        <div class="query-result" id="result-mongo3">
                            <div class="placeholder"><i class="fas fa-calculator placeholder-icon"></i>
                                <p>Clica em Executar</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-mongo5">
                        <div class="query-header">
                            <h3>4. Dados de uma reserva específica</h3>
                            <p class="query-description">Retorna todos os dados de uma reserva pelo número</p>
                        </div>
                        <div class="query-controls">
                            <div class="input-group">
                                <label>Reserva:</label>
                                <select id="select-mongo-reserva" class="custom-select">
                                    <option value="R001">R001</option>
                                    <option value="R002">R002</option>
                                    <option value="R003">R003</option>
                                </select>
                            </div>
                            <button class="btn-secondary" onclick="toggleCode('mongo5')"><i class="fas fa-code"></i> Ver
                                Query</button>
                            <button class="btn-execute" onclick="executarQueryMongo('mongo5')"><i
                                    class="fas fa-play"></i> Executar</button>
                        </div>
                        <div class="code-container hidden" id="code-mongo5">
                            <pre class="code-display"><code>db.reservas.findOne({ numeroReserva: "R001" })</code></pre>
                        </div>
                        <div class="query-result" id="result-mongo5">
                            <div class="placeholder"><i class="fas fa-search placeholder-icon"></i>
                                <p>Selecciona e Executa</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="main-section" id="section-xquery">
            <div class="queries-section glass-card">
                <div class="section-header">
                    <h2><i class="fas fa-code section-icon"></i> XQuery - BaseX REST API</h2>
                </div>

                <div class="query-tabs">
                    <button class="tab-btn active" data-tab="xq1"><i class="fas fa-user"></i> Hóspede</button>
                    <button class="tab-btn" data-tab="xq2"><i class="fas fa-building"></i> Unidade</button>
                    <button class="tab-btn" data-tab="xq3"><i class="fas fa-concierge-bell"></i> Serviços</button>
                </div>

                <div class="query-content">
                    <div class="tab-panel active" id="panel-xq1">
                        <div class="query-header">
                            <h3>Query 1: Reservas de um hóspede</h3>
                            <p class="query-description">Apresenta todas as reservas de um hóspede específico</p>
                        </div>
                        <div class="query-controls">
                            <div class="input-group">
                                <label>Hóspede:</label>
                                <select id="select-xq-hospede" class="custom-select">
                                    <option value="CLI123">CLI123 - João Silva</option>
                                    <option value="CLI456">CLI456 - Maria Costa</option>
                                </select>
                            </div>
                            <button class="btn-secondary" onclick="toggleCode('xq1')"><i class="fas fa-code"></i> Ver
                                Query</button>
                            <button class="btn-execute" onclick="executarQueryXQ('xq1')"><i class="fas fa-play"></i>
                                Executar</button>
                        </div>
                        <div class="code-container hidden" id="code-xq1">
                            <pre class="code-display"><code>declare variable $numeroCliente as xs:string external := "CLI123";

let $reservas := doc("reservas.xml")//reserva[hospede/numeroCliente = $numeroCliente]

return
  &lt;resultado&gt;
    &lt;hospede&gt;{$numeroCliente}&lt;/hospede&gt;
    &lt;totalReservas&gt;{count($reservas)}&lt;/totalReservas&gt;
    &lt;reservas&gt;
    {
      for $reserva in $reservas
      return
        &lt;reserva numero="{$reserva/@numeroReserva}"&gt;
          &lt;nome&gt;{$reserva/hospede/nome/text()}&lt;/nome&gt;
          &lt;unidade&gt;{$reserva/unidade/text()}&lt;/unidade&gt;
          &lt;checkIn&gt;{$reserva/checkIn/text()}&lt;/checkIn&gt;
          &lt;checkOut&gt;{$reserva/checkOut/text()}&lt;/checkOut&gt;
          &lt;valorTotal&gt;{$reserva/valorTotal/text()}&lt;/valorTotal&gt;
        &lt;/reserva&gt;
    }
    &lt;/reservas&gt;
  &lt;/resultado&gt;</code></pre>
                        </div>
                        <div class="query-result" id="result-xq1">
                            <div class="placeholder"><i class="fas fa-user placeholder-icon"></i>
                                <p>Selecciona e Executa</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-xq2">
                        <div class="query-header">
                            <h3>Query 2: Quantidade de reservas por unidade</h3>
                            <p class="query-description">Apresenta a quantidade de reservas por cada unidade hoteleira
                            </p>
                        </div>
                        <div class="query-controls">
                            <button class="btn-secondary" onclick="toggleCode('xq2')"><i class="fas fa-code"></i> Ver
                                Query</button>
                            <button class="btn-execute" onclick="executarQueryXQ('xq2')"><i class="fas fa-play"></i>
                                Executar</button>
                        </div>
                        <div class="code-container hidden" id="code-xq2">
                            <pre class="code-display"><code>let $reservas := doc("reservas.xml")//reserva

return
  &lt;resultado&gt;
    &lt;totalGeral&gt;{count($reservas)}&lt;/totalGeral&gt;
    &lt;unidades&gt;
    {
      for $unidade in distinct-values($reservas/unidade)
      let $quantidade := count($reservas[unidade = $unidade])
      order by $unidade
      return
        &lt;unidade codigo="{$unidade}"&gt;
          &lt;nome&gt;{
            switch($unidade)
              case "LS" return "Lisboa"
              case "PO" return "Porto"
              case "CB" return "Coimbra"
              case "FR" return "Faro"
              case "BR" return "Braga"
              default return "Desconhecida"
          }&lt;/nome&gt;
          &lt;quantidade&gt;{$quantidade}&lt;/quantidade&gt;
        &lt;/unidade&gt;
    }
    &lt;/unidades&gt;
  &lt;/resultado&gt;</code></pre>
                        </div>
                        <div class="query-result" id="result-xq2">
                            <div class="placeholder"><i class="fas fa-building placeholder-icon"></i>
                                <p>Clica em Executar</p>
                            </div>
                        </div>
                    </div>

                    <div class="tab-panel" id="panel-xq3">
                        <div class="query-header">
                            <h3>Query 3: Total de serviços adicionais vendidos</h3>
                            <p class="query-description">Apresenta o total de serviços adicionais vendidos em todas as
                                unidades</p>
                        </div>
                        <div class="query-controls">
                            <button class="btn-secondary" onclick="toggleCode('xq3')"><i class="fas fa-code"></i> Ver
                                Query</button>
                            <button class="btn-execute" onclick="executarQueryXQ('xq3')"><i class="fas fa-play"></i>
                                Executar</button>
                        </div>
                        <div class="code-container hidden" id="code-xq3">
                            <pre class="code-display"><code>let $servicos := doc("reservas.xml")//servicoAdicional

return
  &lt;resultado&gt;
    &lt;totalServicos&gt;{count($servicos)}&lt;/totalServicos&gt;
    &lt;totalQuantidade&gt;{sum($servicos/quantidade)}&lt;/totalQuantidade&gt;
    &lt;valorTotal&gt;{sum(for $s in $servicos return $s/preco * $s/quantidade)}&lt;/valorTotal&gt;
    &lt;servicosPorTipo&gt;
    {
      for $tipo in distinct-values($servicos/tipo)
      let $servicosDoTipo := $servicos[tipo = $tipo]
      let $quantidadeTotal := sum($servicosDoTipo/quantidade)
      let $valorTotal := sum(for $s in $servicosDoTipo return $s/preco * $s/quantidade)
      order by $quantidadeTotal descending
      return
        &lt;tipo nome="{$tipo}"&gt;
          &lt;quantidade&gt;{$quantidadeTotal}&lt;/quantidade&gt;
          &lt;valor&gt;{$valorTotal}&lt;/valor&gt;
        &lt;/tipo&gt;
    }
    &lt;/servicosPorTipo&gt;
  &lt;/resultado&gt;</code></pre>
                        </div>
                        <div class="query-result" id="result-xq3">
                            <div class="placeholder"><i class="fas fa-concierge-bell placeholder-icon"></i>
                                <p>Clica em Executar</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="main-section" id="section-xsd">
            <div class="queries-section glass-card">
                <div class="section-header">
                    <h2><i class="fas fa-file-code section-icon"></i> Schemas do Sistema</h2>
                    <p style="color: var(--text-secondary); margin-top: 0.5rem;">Estruturas de dados: XML, XSD e MongoDB
                    </p>
                </div>

                <!-- Tabs para Schemas -->
                <div class="query-tabs">
                    <button class="tab-btn active" data-tab="schema-xml"><i class="fas fa-code"></i> XML
                        Exemplo</button>
                    <button class="tab-btn" data-tab="schema-xsd"><i class="fas fa-file-alt"></i> XSD Validação</button>
                    <button class="tab-btn" data-tab="schema-mongo"><i class="fas fa-leaf"></i> MongoDB</button>
                </div>

                <div class="query-content">
                    <!-- Tab XML -->
                    <div class="tab-panel active" id="panel-schema-xml">
                        <div class="query-header">
                            <h3><i class="fas fa-code"></i> Exemplo XML - Reserva Completa</h3>
                            <p class="query-description">Estrutura de dados XML utilizada no sistema</p>
                        </div>
                        <div class="code-container">
                            <pre class="code-display"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;reservas&gt;
  &lt;reserva numeroReserva="RES001"&gt;
    &lt;hospede&gt;
      &lt;numeroCliente&gt;CLI123&lt;/numeroCliente&gt;
      &lt;nome&gt;João Silva&lt;/nome&gt;
      &lt;nif&gt;123456789&lt;/nif&gt;
      &lt;telefone&gt;912345678&lt;/telefone&gt;
      &lt;email&gt;joao@example.com&lt;/email&gt;
    &lt;/hospede&gt;
    &lt;unidade&gt;LS&lt;/unidade&gt;
    &lt;quarto&gt;101&lt;/quarto&gt;
    &lt;checkIn&gt;2025-01-15&lt;/checkIn&gt;
    &lt;checkOut&gt;2025-01-18&lt;/checkOut&gt;
    &lt;valorTotal&gt;450.00&lt;/valorTotal&gt;
    &lt;servicosAdicionais&gt;
      &lt;servicoAdicional&gt;
        &lt;tipo&gt;spa&lt;/tipo&gt;
        &lt;quantidade&gt;2&lt;/quantidade&gt;
        &lt;preco&gt;50.00&lt;/preco&gt;
      &lt;/servicoAdicional&gt;
      &lt;servicoAdicional&gt;
        &lt;tipo&gt;restaurante&lt;/tipo&gt;
        &lt;quantidade&gt;1&lt;/quantidade&gt;
        &lt;preco&gt;35.00&lt;/preco&gt;
      &lt;/servicoAdicional&gt;
    &lt;/servicosAdicionais&gt;
  &lt;/reserva&gt;
&lt;/reservas&gt;</code></pre>
                        </div>
                    </div>

                    <!-- Tab XSD -->
                    <div class="tab-panel" id="panel-schema-xsd">
                        <div class="query-header">
                            <h3><i class="fas fa-file-alt"></i> XML Schema (XSD) - Validação</h3>
                            <p class="query-description">Definição de tipos e regras de validação</p>
                        </div>

                        <div class="xsd-types">
                            <h4><i class="fas fa-cubes"></i> Tipos Personalizados (simpleType)</h4>
                            <div class="types-grid">
                                <div class="type-card">
                                    <h4>tipoNumeroCliente</h4>
                                    <code>[A-Z]{3}[0-9]{3}</code>
                                    <p>3 letras + 3 números (ex: CLI123)</p>
                                </div>
                                <div class="type-card">
                                    <h4>tipoNIF</h4>
                                    <code>[0-9]{9}</code>
                                    <p>9 dígitos numéricos</p>
                                </div>
                                <div class="type-card">
                                    <h4>tipoTelefone</h4>
                                    <code>9[0-9]{8}</code>
                                    <p>Começa por 9, 9 dígitos total</p>
                                </div>
                                <div class="type-card">
                                    <h4>tipoNumeroReserva</h4>
                                    <code>RES[0-9]{3}</code>
                                    <p>RES + 3 números (ex: RES001)</p>
                                </div>
                                <div class="type-card">
                                    <h4>tipoServico</h4>
                                    <code>enumeration</code>
                                    <p>spa | restaurante | transporte | outros</p>
                                </div>
                                <div class="type-card">
                                    <h4>tipoUnidade</h4>
                                    <code>enumeration</code>
                                    <p>LS | PO | CB | FR | BR</p>
                                </div>
                            </div>
                        </div>

                        <div class="xsd-restricao glass-card" style="margin-top: 1.5rem; padding: 1rem;">
                            <h4><i class="fas fa-exclamation-triangle" style="color: var(--accent-orange);"></i>
                                Restrição
                                Importante</h4>
                            <p>Não é permitida a introdução de mais do que <strong>4 serviços adicionais</strong> numa
                                mesma
                                reserva.</p>
                            <code>maxOccurs="4"</code>
                        </div>

                        <div class="query-controls" style="margin-top: 1.5rem;">
                            <button class="btn-secondary" onclick="toggleCode('xsd')"><i class="fas fa-code"></i> Ver
                                Schema
                                Completo</button>
                        </div>
                        <div class="code-container hidden" id="code-xsd">
                            <pre class="code-display"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;

  &lt;xs:simpleType name="tipoNumeroCliente"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:pattern value="[A-Z]{3}[0-9]{3}"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

  &lt;xs:simpleType name="tipoNIF"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:pattern value="[0-9]{9}"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

  &lt;xs:simpleType name="tipoTelefone"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:pattern value="9[0-9]{8}"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

  &lt;xs:simpleType name="tipoUnidade"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="LS"/&gt;
      &lt;xs:enumeration value="PO"/&gt;
      &lt;xs:enumeration value="CB"/&gt;
      &lt;xs:enumeration value="FR"/&gt;
      &lt;xs:enumeration value="BR"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

  &lt;xs:simpleType name="tipoServico"&gt;
    &lt;xs:restriction base="xs:string"&gt;
      &lt;xs:enumeration value="spa"/&gt;
      &lt;xs:enumeration value="restaurante"/&gt;
      &lt;xs:enumeration value="transporte"/&gt;
      &lt;xs:enumeration value="outros"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

  &lt;xs:element name="reservas"&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name="reserva" maxOccurs="unbounded"&gt;
          &lt;xs:complexType&gt;
            &lt;xs:sequence&gt;
              &lt;xs:element name="hospede"&gt;...&lt;/xs:element&gt;
              &lt;xs:element name="unidade" type="tipoUnidade"/&gt;
              &lt;xs:element name="checkIn" type="xs:date"/&gt;
              &lt;xs:element name="checkOut" type="xs:date"/&gt;
              &lt;xs:element name="valorTotal" type="xs:decimal"/&gt;
              &lt;xs:element name="servicosAdicionais" minOccurs="0"&gt;
                &lt;xs:complexType&gt;
                  &lt;xs:sequence&gt;
                    &lt;xs:element name="servicoAdicional" maxOccurs="4"/&gt;
                  &lt;/xs:sequence&gt;
                &lt;/xs:complexType&gt;
              &lt;/xs:element&gt;
            &lt;/xs:sequence&gt;
            &lt;xs:attribute name="numeroReserva" type="tipoNumeroReserva" use="required"/&gt;
          &lt;/xs:complexType&gt;
        &lt;/xs:element&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

&lt;/xs:schema&gt;</code></pre>
                        </div>
                    </div>

                    <!-- Tab MongoDB Schema -->
                    <div class="tab-panel" id="panel-schema-mongo">
                        <div class="query-header">
                            <h3><i class="fas fa-leaf"></i> MongoDB Schema - Estrutura de Documentos</h3>
                            <p class="query-description">Modelo NoSQL utilizado na base de dados</p>
                        </div>

                        <div class="xsd-types">
                            <h4><i class="fas fa-database"></i> Documento Reserva (Collection: reservas)</h4>
                        </div>

                        <div class="code-container">
                            <pre class="code-display"><code>{
  "_id": ObjectId("..."),
  "numeroReserva": "RES001",
  "hospede": {
    "numeroCliente": "CLI123",
    "nome": "João Silva",
    "nif": "123456789",
    "telefone": "912345678",
    "email": "joao@example.com"
  },
  "unidade": "LS",
  "quarto": "101",
  "checkIn": "2025-01-15",
  "checkOut": "2025-01-18",
  "valorTotal": 450.00,
  "servicosAdicionais": [
    {
      "tipo": "spa",
      "quantidade": 2,
      "preco": 50.00
    },
    {
      "tipo": "restaurante",
      "quantidade": 1,
      "preco": 35.00
    }
  ]
}</code></pre>
                        </div>

                        <div class="xsd-types" style="margin-top: 2rem;">
                            <h4><i class="fas fa-key"></i> Validações e Regras</h4>
                            <div class="types-grid">
                                <div class="type-card">
                                    <h4>Índices</h4>
                                    <code>unique</code>
                                    <p>numeroReserva (único)</p>
                                </div>
                                <div class="type-card">
                                    <h4>Campos Obrigatórios</h4>
                                    <code>required</code>
                                    <p>numeroReserva, hospede, unidade, checkIn</p>
                                </div>
                                <div class="type-card">
                                    <h4>Tipo de Dados</h4>
                                    <code>Number, String, Array</code>
                                    <p>valorTotal: Number, servicosAdicionais: Array</p>
                                </div>
                                <div class="type-card">
                                    <h4>Validação Backend</h4>
                                    <code>maxServicos: 4</code>
                                    <p>Máximo 4 serviços adicionais (server.js)</p>
                                </div>
                            </div>
                        </div>

                        <div class="xsd-restricao glass-card" style="margin-top: 1.5rem; padding: 1rem;">
                            <h4><i class="fas fa-info-circle" style="color: var(--accent-primary);"></i> Diferenças XML
                                vs MongoDB</h4>
                            <p><strong>XML:</strong> Estrutura hierárquica, validação via XSD, Schema estático</p>
                            <p><strong>MongoDB:</strong> Documentos flexíveis (JSON), Schema dinâmico, validações no
                                backend</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="main-section" id="section-sobre">
            <div class="sobre-grid">
                <div class="sobre-card glass-card">
                    <h2><i class="fas fa-graduation-cap"></i> Sobre o Projeto</h2>
                    <p>Trabalho Prático desenvolvido no âmbito da unidade curricular <strong>Processo, Estruturação e
                            Integração de Dados (PEID)</strong>.</p>
                    <div class="sobre-info">
                        <div class="info-item">
                            <i class="fas fa-university"></i>
                            <span>ESTG - Politécnico do Porto</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-book"></i>
                            <span>DWDM - Desenvolvimento Web e Dispositivos Móveis</span>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Ano Letivo 2025/2026</span>
                        </div>
                    </div>
                </div>

                <div class="sobre-card glass-card">
                    <h2><i class="fas fa-layer-group"></i> Stack Tecnológica</h2>
                    <div class="tech-stack-grid">
                        <div class="tech-item-large">
                            <i class="fas fa-file-code"></i>
                            <span>XML / XSD</span>
                        </div>
                        <div class="tech-item-large">
                            <i class="fas fa-database"></i>
                            <span>BaseX / XQuery</span>
                        </div>
                        <div class="tech-item-large">
                            <i class="fas fa-leaf"></i>
                            <span>MongoDB Atlas</span>
                        </div>
                        <div class="tech-item-large">
                            <i class="fab fa-node-js"></i>
                            <span>Node.js / Express</span>
                        </div>
                        <div class="tech-item-large">
                            <i class="fab fa-html5"></i>
                            <span>HTML / CSS / JS</span>
                        </div>
                        <div class="tech-item-large">
                            <i class="fas fa-cloud"></i>
                            <span>Render / Vercel</span>
                        </div>
                    </div>
                </div>

                <div class="sobre-card glass-card full-width">
                    <h2><i class="fas fa-server"></i> API Endpoints</h2>
                    <div class="endpoints-list">
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <code>/api/reservas</code>
                            <span class="endpoint-desc">Todas as reservas</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <code>/api/reservas/hospede/:numeroCliente</code>
                            <span class="endpoint-desc">Reservas de um hóspede</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <code>/api/reservas/unidade</code>
                            <span class="endpoint-desc">Quantidade por unidade</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <code>/api/servicos/total</code>
                            <span class="endpoint-desc">Total de serviços vendidos</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <code>/api/reservas/media</code>
                            <span class="endpoint-desc">Valor médio das reservas</span>
                        </div>

                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <code>/api/reservas/maior</code>
                            <span class="endpoint-desc">Reserva com maior valor</span>
                        </div>

                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <code>/api/reservas/:numeroReserva</code>
                            <span class="endpoint-desc">Dados de uma reserva</span>
                        </div>
                        <div class="endpoint-item">
                            <span class="endpoint-method">GET</span>
                            <code>/api/estatisticas</code>
                            <span class="endpoint-desc">Dashboard stats</span>
                        </div>

                        <div class="endpoint-item">
                            <span class="endpoint-method">POST</span>
                            <code>/api/reservas</code>
                            <span class="endpoint-desc">Criar nova reserva</span>
                        </div>

                        <div class="endpoint-item">
                            <span class="endpoint-method">PUT</span>
                            <code>/api/reservas/:numeroReserva</code>
                            <span class="endpoint-desc">Atualizar reserva</span>
                        </div>

                        <div class="endpoint-item">
                            <span class="endpoint-method">DELETE</span>
                            <code>/api/reservas/:numeroReserva</code>
                            <span class="endpoint-desc">Eliminar reserva</span>
                        </div>
                    </div>
                </div>



                <div class="sobre-card glass-card full-width">
                    <h2><i class="fas fa-terminal"></i> Pedidos HTTP (cURL)</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">Exemplos de chamadas à API REST
                        utilizando cURL</p>
                    <div class="http-requests">
                        <div class="http-item">
                            <h4>Obter todas as reservas</h4>
                            <code>curl -X GET http://localhost:3000/api/reservas</code>
                        </div>
                        <div class="http-item">
                            <h4>Reservas de um hóspede</h4>
                            <code>curl -X GET http://localhost:3000/api/reservas/hospede/CLI123</code>
                        </div>
                        <div class="http-item">
                            <h4>Quantidade por unidade</h4>
                            <code>curl -X GET http://localhost:3000/api/reservas/unidade</code>
                        </div>
                        <div class="http-item">
                            <h4>Total de serviços</h4>
                            <code>curl -X GET http://localhost:3000/api/servicos/total</code>
                        </div>
                        <div class="http-item">
                            <h4>Valor médio</h4>
                            <code>curl -X GET http://localhost:3000/api/reservas/media</code>
                        </div>
                        <div class="http-item">
                            <h4>Reserva específica</h4>
                            <code>curl -X GET http://localhost:3000/api/reservas/R001</code>
                        </div>
                    </div>
                </div>

                <div class="sobre-card glass-card">
                    <h2><i class="fas fa-user-circle"></i> Estrutura Hóspede</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">Dados obrigatórios do hóspede</p>
                    <div class="hospede-fields">
                        <div class="field-item">
                            <span class="field-name">numeroCliente</span>
                            <span class="field-type">tipoNumeroCliente</span>
                            <span class="field-ex">CLI123</span>
                        </div>
                        <div class="field-item">
                            <span class="field-name">nome</span>
                            <span class="field-type">xs:string</span>
                            <span class="field-ex">João Silva</span>
                        </div>
                        <div class="field-item">
                            <span class="field-name">nif</span>
                            <span class="field-type">tipoNIF</span>
                            <span class="field-ex">123456789</span>
                        </div>
                        <div class="field-item">
                            <span class="field-name">email</span>
                            <span class="field-type">tipoEmail</span>
                            <span class="field-ex">email@mail.com</span>
                        </div>
                        <div class="field-item">
                            <span class="field-name">telefone</span>
                            <span class="field-type">tipoTelefone</span>
                            <span class="field-ex">912345678</span>
                        </div>
                    </div>
                </div>

                <div class="sobre-card glass-card">
                    <h2><i class="fas fa-chart-bar"></i> MongoDB Charts</h2>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">Dashboard disponível no MongoDB Atlas
                    </p>
                    <div class="charts-info">
                        <div class="chart-info-item">
                            <i class="fas fa-chart-pie"></i>
                            <div>
                                <h4>Gráfico 1: Reservas por Unidade</h4>
                                <p>Distribuição das reservas pelas 5 unidades hoteleiras</p>
                            </div>
                        </div>
                        <div class="chart-info-item">
                            <i class="fas fa-chart-bar"></i>
                            <div>
                                <h4>Gráfico 2: Serviços por Tipo</h4>
                                <p>Total de serviços vendidos agrupados por categoria</p>
                            </div>
                        </div>
                    </div>
                    <br>
                    <a href="https://charts.mongodb.com/charts-xml-czajzfn/dashboards/69514d9b-3646-46d5-819f-a8696c02ee7a"
                        target="_blank" class="btn-execute"
                        style="display: inline-flex; align-items: center; gap: 0.5rem; text-decoration: none;">
                        <i class="fas fa-external-link-alt"></i>
                        <span>Ver Dashboard MongoDB Atlas Charts</span>
                    </a>

                </div>

                <div class="sobre-card glass-card full-width">
                    <h2><i class="fas fa-tasks"></i> Artefactos Desenvolvidos</h2>
                    <div class="artefactos-grid">
                        <div class="artefacto-item">
                            <i class="fas fa-file-code"></i>
                            <span>reservas.xml</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fas fa-check-circle"></i>
                            <span>reservas.xsd</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fas fa-file-alt"></i>
                            <span>reservas.json</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fas fa-code"></i>
                            <span>query1_reservas_hospede.xq</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fas fa-code"></i>
                            <span>query2_reservas_por_unidade.xq</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fas fa-code"></i>
                            <span>query3_total_servicos.xq</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fas fa-server"></i>
                            <span>api_hotel.xqm</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fas fa-database"></i>
                            <span>consultas_mongodb.js</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fab fa-node-js"></i>
                            <span>server.js</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fas fa-cog"></i>
                            <span>package.json</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fab fa-html5"></i>
                            <span>index.html</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fab fa-css3-alt"></i>
                            <span>styles.css</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fab fa-js"></i>
                            <span>app.js</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fab fa-js"></i>
                            <span>update-form.js</span>
                        </div>
                        <div class="artefacto-item">
                            <i class="fas fa-book"></i>
                            <span>swagger.html</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>





    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
    <script>
        const canvas = document.getElementById('sparklesCanvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const COLORS = ["#a855f7", "#8c76a8", "#5d3e8f", "#d8b4fe", "#ffffff"];
        const sparkles = [];
        const NUM_SPARKLES = window.innerWidth < 768 ? 80 : 200;

        for (let i = 0; i < NUM_SPARKLES; i++) {
            sparkles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 3 + 1,
                alpha: Math.random(),
                alphaSpeed: (Math.random() - 0.5) * 0.02,
                color: COLORS[Math.floor(Math.random() * COLORS.length)]
            });
        }

        function animateSparkles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            sparkles.forEach(s => {
                s.alpha += s.alphaSpeed;
                if (s.alpha <= 0.1 || s.alpha >= 1) s.alphaSpeed *= -1;
                s.alpha = Math.max(0.1, Math.min(1, s.alpha));

                const hex = s.color;
                const r = parseInt(hex.slice(1, 3), 16);
                const g = parseInt(hex.slice(3, 5), 16);
                const b = parseInt(hex.slice(5, 7), 16);

                ctx.beginPath();
                ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(${r}, ${g}, ${b}, ${s.alpha})`;
                ctx.fill();
            });

            requestAnimationFrame(animateSparkles);
        }

        animateSparkles();

        // Monitorizar clique no Swagger
        const swaggerLink = document.querySelector('.swagger-link');
        let returningFromSwagger = false;

        if (swaggerLink) {
            swaggerLink.addEventListener('click', () => {
                returningFromSwagger = true;
            });
        }

        window.addEventListener('focus', function () {
            // Só reseta se tiver vindo do Swagger
            if (!returningFromSwagger) return;

            const dashboardBtn = document.querySelector('.nav-btn[data-section="dashboard"]');
            const dashboardSection = document.getElementById('section-dashboard');

            if (dashboardBtn && !dashboardBtn.classList.contains('active')) {
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.main-section').forEach(section => section.classList.remove('active'));

                dashboardBtn.classList.add('active');
                dashboardSection.classList.add('active');
            }

            // Reset flag
            returningFromSwagger = false;
        });
    </script>
    <script src="update-form.js"></script>
</body>

</html>